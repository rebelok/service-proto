"use strict";!function(e){function n(e){function r(n){return n.some(function(n){return e.indexOf(n)>=0})}if(e){e=e.toLowerCase(),o("searchTerm =",e);var l,u,p,d,g,v=[];if(l=r(t),u=r(s),p=r(i),d=r(a),g=l||u||p||d)l||v.push(c.place),u||v.push(c.time),p||v.push(c.action),d||v.push(c.object),v.type=1;else{var h,f,m,b=function(n){return 0===n.indexOf(e)};h=[t,s,i,[a[0]]],f=h.reduce(function(e,n){return m=n.filter(b),e.concat(m)},[]),o("suggectionTerms =",f),f.length>1&&(v=f,v.type=2),1===f.length&&(v=n(f[0]),v.title=f[0],v.type=3)}return v}}var t=["магазин","супермаркет","универсам"],s=["сегодня"," завтра"],i=["привезти","доставить","доставк","принести","купить"],a=["молоко","молока"],c={place:{title:"Откуда?",list:["Ближайшего магазина","Любого магазина"]},time:{title:"Когда?",list:["Сегодня"," Завтра","21 мая","22 мая"]},action:{title:"Что сделать?",list:["Привезти","Забрать","Купить"]},object:{title:"Что именно?",list:["Фрукты","Молоко","Воду"]}},o=console.log.bind(console,"Search: ");e.searcher={check:n}}(window),$(function(){function e(e){var s=$('<div class="suggestion-box"></div>');if(r.empty(),e&&e.length)switch(e.type){case 1:s.append(t(e)).appendTo(r);break;case 2:s.append(n(e)).appendTo(r);break;case 3:s.append($('<span class="suggestions-header js-can-hover">'+e.title+"</span>")).append(t(e)).appendTo(r)}}function n(e){var n=$('<ul class="suggestion-list"></ul>');return n.append(e.reduce(function(e,n){return e+'<li class="suggestion-item js-can-hover">'+n+"</li>"},"")),n}function t(e){var t=$('<ul class="suggestion-big-list"></ul>'),s=e.reduce(function(e,t){var s=$('<li class="suggestion-big-item"></li>'),i='<span class="suggestion-list__header">'+t.title+"</span>";return e.append(s.append(i),s.append(n(t.list)))},t);return s}function s(){$(".js-btn-services").click(function(){$(".main-body").addClass("main-body-text"),$(".js-btn-services").addClass("active"),$(".js-btn-popular").removeClass("active")}),$(".js-btn-popular").click(function(){$(".main-body").removeClass("main-body-text"),$(".js-btn-services").removeClass("active"),$(".js-btn-popular").addClass("active")});var e=$(".search-input");e.on("keyup change",i),r.on("mouseenter",".js-can-hover",function(e){a(),$(e.currentTarget).addClass("item_hovered")}),r.on("click",".suggestions-header",function(n){e.val($(n.currentTarget).text()+" "),e.change()}),r.on("click",".suggestion-item",function(n){e.val(e.val()+" "+$(n.currentTarget).text()+" "),e.change()})}function i(n){o(n),c=window.searcher.check(n.target.value),o("suggestionList =",c),e(c),13===n.keyCode&&(window.location.href="search.html")}function a(){r.find(".js-can-hover").removeClass("item_hovered")}var c,o=console.log.bind(console,"App: "),r=$(".suggestion-box-wrapper");s()}());