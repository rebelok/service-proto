"use strict";!function(e){function t(e){function t(t){return t.some(function(t){return e.indexOf(t)>=0})}if(e){e=e.toLowerCase(),c("searchTerm =",e);var r,u,p,l,d,h=[];if(r=t(s),u=t(n),p=t(i),l=t(a),d=r||u||p||l){if(h.type=1,l)return p?(r||h.push(o.place),u||h.push(o.time),h):u?(p||h.push(o.action),h):(p||h.push(o.action),u||h.push(o.time),h);if(p)return r?(l||h.push(o.object),u||h.push(o.time),h):u?(l||h.push(o.object),r||h.push(o.place),h):(l||h.push(o.object),r||h.push(o.place),u||h.push(o.time),h);if(r)return u?(p||h.push(o.action),h):(h.push(o.action),u||u||h.push(o.time),h);u&&(p||h.push(o.action))}return h}}var s=["магазин","супермаркет","универсам"],n=["сегодня","завтра","21 мая","22 мая"],i=["привезти","доставить","доставк","принести","купить"],a=["молоко","молока","фрукты","воду"],o={place:{title:"Откуда?",list:["Из ближайшего магазина","Из любого магазина"]},time:{title:"Когда?",list:["Сегодня"," Завтра","21 мая","22 мая"]},action:{title:"Что сделать?",list:["Привезти","Забрать","Купить","Доставить"]},object:{title:"Что именно?",list:["Фрукты","Молоко","Воду"]}},c=console.log.bind(console,"Search: ");e.searcher={check:t}}(window);var app=function(){function e(){i()}function t(e){var t=$('<div class="suggestion-box"></div>');if(u.empty(),e&&e.length)switch(e.type){case 1:t.append(n(e)).appendTo(u);break;case 2:t.append(s(e)).appendTo(u);break;case 3:t.append($('<span class="suggestions-header js-can-hover">'+e.title+"</span>")).append(n(e)).appendTo(u)}}function s(e){var t=$('<ul class="suggestion-list"></ul>');return t.append(e.reduce(function(e,t){return e+'<li class="suggestion-item js-can-hover">'+t+"</li>"},"")),t}function n(e){var t=$('<ul class="suggestion-big-list"></ul>'),n=e.reduce(function(e,t){var n=$('<li class="suggestion-big-item"></li>'),i='<span class="suggestion-list__header">'+t.title+"</span>";return e.append(n.append(i),n.append(s(t.list)))},t);return n}function i(){$(".js-btn-services").click(function(){$(".main-body").addClass("main-body-text"),$(".js-btn-services").addClass("active"),$(".js-btn-popular").removeClass("active")}),$(".js-btn-popular").click(function(){$(".main-body").removeClass("main-body-text"),$(".js-btn-services").removeClass("active"),$(".js-btn-popular").addClass("active")});var e=$(".search-input");e.on("keyup change",a),u.on("mouseenter",".js-can-hover",function(e){o(),$(e.currentTarget).addClass("item_hovered")}),u.on("mouseup",".suggestion-item",function(t){e.val(e.val()+" "+$(t.currentTarget).text()+" "),e.change(),e.focus()})}function a(e){r(e),c=window.searcher.check(e.target.value),r("suggestionList =",c),t(c),store.set("search",e.target.value),13===e.keyCode&&(window.location.href="search.html")}function o(){u.find(".js-can-hover").removeClass("item_hovered")}var c,r=console.log.bind(console,"App: "),u=$(".suggestion-box-wrapper");return{init:e}}();$(function(){app.init()});